(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-ldd-goods"],{"0ee8":function(e,t,i){"use strict";i.r(t);var a=i("12a1"),n=i("2a27");for(var s in n)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(s);i("4a41");var o=i("f0c5"),r=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"1428deec",null,!1,a["a"],void 0);t["default"]=r.exports},"12a1":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return a}));var a={guiPage:i("1d79").default,guiImage:i("e1fa").default,guiSwiper:i("d22b").default,jyfParser:i("66e9").default,guiPopup:i("d2c4").default,guiStepBox:i("05d6").default,lPainter:i("4810").default,lPainterImage:i("7ce1").default,lPainterView:i("ffa7").default,lPainterText:i("159e").default},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("gui-page",{ref:"guiPage",attrs:{isLoading:e.pageLoading}},[a("v-uni-view",{attrs:{slot:"gBody"},slot:"gBody"},[e.isEmpty?a("v-uni-view",{staticClass:"fullPage gui-flex gui-justify-content-center gui-align-items-center fm",staticStyle:{"margin-top":"-100rpx"}},[a("gui-image",{attrs:{src:"../../static/images/noData.png",width:396,height:226,timer:0}})],1):e._e(),!e.isEmpty&&e.goods?[a("v-uni-view",{staticClass:"bgFFFFFF"},[a("gui-swiper",{attrs:{autoplay:!1,circular:!1,swiperItems:e.banner,width:750,height:750,borderRadius:"0rpx",spacing:0,padding:0,indicatorActiveWidth:38,indicatorBarHeight:40,indicatorWidth:28,indicatorHeight:6,indicatorColor:"#E7E7E7",indicatorActiveColor:"#000000"}}),a("v-uni-view",{staticClass:"plr30 mt30 gui-flex gui-align-items-center gui-space-between"},[a("v-uni-view",{staticClass:"gui-flex gui-align-items-end"},[a("v-uni-text",{staticClass:"fb f30 cDC261F",staticStyle:{height:"45rpx","line-height":"55rpx"}},[e._v("￥")]),a("v-uni-text",{staticClass:"fb f45 lh45 cDC261F"},[e._v(e._s(e.usefulPrice))]),a("v-uni-text",{staticClass:"fm f28 ml20 cFF4F00"},[e._v(e._s(e.mValue)+"M值")])],1),a("v-uni-view",{staticClass:"gui-flex gui-align-items-center"},[a("v-uni-text",{staticClass:"gui-icons c231815 gui-bold ml30",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.$refs.guipopupHb.open()}}},[e._v("")])],1)],1),a("v-uni-view",{staticClass:"mt20 plr30 fb f30"},[e._v(e._s(e.goods.title))]),a("v-uni-view",{staticClass:"mt20 plr30 fm f28 c999999 pb20"},[e._v("品牌："+e._s(e.goods.brandName))])],1),a("v-uni-view",{staticClass:"p30 bgFFFFFF mt20 gui-flex gui-align-items-center"},[a("v-uni-text",{staticClass:"f30 lh30 fb c231815"},[e._v("已选")]),a("v-uni-text",{staticClass:"f28 lh30 fm c999999 ml20 gui-flex1"},[e._v(e._s(e.goods_option_name)+" "+e._s(e.num)+"件")])],1),a("v-uni-view",{staticClass:"p30 bgFFFFFF gui-text-center c231815 f30 fb mt20"},[e._v("商品详情")]),a("v-uni-view",{staticClass:"bgFFFFFF"},[a("jyf-parser",{ref:"article",attrs:{html:e.detail}})],1),a("gui-popup",{ref:"goodsAttr",attrs:{position:"bottom",width:"750rpx"}},[a("v-uni-view",{staticStyle:{width:"48rpx",margin:"30rpx auto"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.$refs.goodsAttr.close()}}},[a("gui-image",{attrs:{src:"../../static/images/zheng/close.png",timer:0,width:48,height:48}})],1),a("v-uni-view",{staticClass:"bgFFFFFF p30 gui-relative",staticStyle:{"border-radius":"20rpx 20rpx 0 0"}},[a("v-uni-view",{staticClass:"gui-flex gui-align-items-center gui-space-between"},[a("gui-image",{attrs:{src:e.goodsFirstImg,width:120,height:120,borderRadius:"10rpx"}}),a("v-uni-view",{staticStyle:{width:"550rpx"}},[a("v-uni-view",{staticClass:"gui-ellipsis f28 fm"},[e._v(e._s(e.goods.title))]),a("v-uni-view",{staticClass:"gui-ellipsis f28 fm c999999 mt10"},[a("v-uni-text",{staticClass:"cDC261F f28 fb"},[e._v("￥"+e._s(e.usefulPrice))]),a("v-uni-text",{staticClass:"fm f24 ml20 cFF4F00"},[e._v(e._s(e.mValue)+"M值")])],1),a("v-uni-view",{staticClass:"gui-ellipsis f26 fm c999999 mt10"},[e._v("已选"),""!=e.goods_option_name?a("v-uni-text",{staticClass:"ml10 mr10"},[e._v(e._s(e.goods_option_name))]):e._e(),e._v(e._s(e.num)+"个")],1)],1)],1),a("v-uni-scroll-view",{staticClass:"product-attr",attrs:{"scroll-y":!0}},[a("v-uni-view",{staticClass:"gui-flex gui-wrap"},[e._l(e.options,(function(t,i){return[a("v-uni-view",{key:i+"_0",staticClass:"specli fm mt10",class:[t.checked?"speclied":""],on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseSpec(i)}}},[e._l(t.attributeJson,(function(t,i){return[e._v(e._s(i>0?"+":"")+e._s(t.val))]}))],2)]}))],2)],1),a("v-uni-view",{staticClass:"gui-flex gui-space-between gui-align-items-center mt30"},[a("v-uni-text",{staticClass:"f28 fm"},[e._v("数量")]),a("gui-step-box",{attrs:{buttonStyle:"width:60rpx;height:60rpx;background-color:#F5F5F9;text-align:center;line-height:60rpx;font-size:40rpx;",inputStyle:"border-radius:0;background-color:#e2e2e2;font-size:30rpx;height:60rpx;",value:e.num,minNum:e.minNum,maxNum:e.maxNum,disabled:!0},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.numberChange.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"sure fm bgFF4F00",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sure.apply(void 0,arguments)}}},[e._v(e._s(e.sureText))])],1)],1),a("gui-popup",{ref:"guipopupHb",attrs:{bgColor:"rgba(0,0,0,0.85)",zIndex:99,width:"600rpx"}},[a("v-uni-canvas",{staticStyle:{width:"600rpx",height:"870rpx"}},[a("gui-image",{attrs:{src:e.path,width:600,height:870,borderRadius:"20rpx"}})],1),a("v-uni-view",{staticClass:"gui-flex gui-align-items-center gui-justify-content-center mt40"},[a("v-uni-view",{staticClass:"hBtn bgFFFFFF f28 fm",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.$refs.guipopupHb.close()}}},[e._v("取消")]),a("v-uni-view",{staticClass:"hBtn bgFF4F00 f28 fm cFFFFFF",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.savePicture.apply(void 0,arguments)}}},[e._v("保存图片")])],1)],1),a("l-painter",{ref:"painter",staticClass:"lime-painter",attrs:{type:"2d",isCanvasToTempFilePath:!0,css:"width:1200rpx;height:1740rpx;background:#FFFFFF;border-radius:40rpx;"},on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.path=t}}},[a("l-painter-image",{attrs:{src:e.goodsFirstImg,css:"width:1200rpx;height:1200rpx;border-radius:40rpx 40rpx 0 0;"}}),a("l-painter-view",{attrs:{css:"margin:80rpx 0;display:flex;justify-content:center;align-items:center;height:146rpx;"}},[a("l-painter-text",{attrs:{text:e.goods.title,css:"display:inline-block;width:600rpx;color:#000000;font-size:52rpx;line-height:72rpx;line-clamp:2;"}}),a("l-painter-view",{attrs:{css:"border-left:1px solid #999999;height:120rpx;margin:15rpx 60rpx 15rpx 80rpx;display:inline-block;"}}),a("l-painter-view",{attrs:{css:"display:inline-block;"}},[a("l-painter-view",[a("l-painter-text",{attrs:{text:"有用专享价",css:"color:#FF4F00;font-size:45rpx;height:73rpx;line-height:73rpx;display:inline-block;margin-left:14rpx;"}})],1),a("l-painter-view",[a("l-painter-text",{attrs:{text:"￥"+e.goods.usefulPrice,css:"color:#FF4F00;font-size:80rpx;height:73rpx;line-height:73rpx;display:inline-block;"}})],1)],1)],1),a("l-painter-view",{attrs:{css:"margin:0 80rpx;display:flex;justify-content:center;height:160rpx;"}},[a("l-painter-image",{attrs:{src:e.userCode,css:"width:160rpx;height:160rpx;"}}),a("l-painter-view",{attrs:{css:"width:450rpx;display:inline-block;margin-left:36rpx;"}},[a("l-painter-view",{attrs:{css:"margin-top:4rpx;"}},[a("l-painter-text",{attrs:{text:"① 保存图片到相册",css:"color:#999999;font-size:44rpx;"}})],1),a("l-painter-view",{attrs:{css:"margin-top:30rpx;"}},[a("l-painter-text",{attrs:{text:"② 扫码下载有用APP",css:"color:#999999;font-size:44rpx;"}})],1)],1),a("l-painter-image",{attrs:{src:e.logo,css:"width:160rpx;height:160rpx;margin-left:230rpx;display:inline-block;"}})],1)],1)]:e._e(),a("v-uni-view",{staticClass:"h120"}),e.goods?a("v-uni-view",{staticClass:"gui-fixed-lb wp100 h120 bgFFFFFF gui-flex gui-align-items-center gui-space-between"},[a("v-uni-view",{staticClass:"gui-flex gui-space-between gui-align-items-center wp100"},[a("v-uni-view",{staticClass:"gui-flex gui-align-items-center gui-justify-content-center gui-flex1"},[a("v-uni-view",{staticClass:"w100 gui-text-center",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.$refs.guipopupHb.open()}}},[a("v-uni-image",{staticClass:"footImg",attrs:{src:i("a9da"),mode:"aspectFill"}}),a("v-uni-view",{staticClass:"f24 c999999 gui-text-center fm"},[e._v("分享")])],1),a("v-uni-navigator",{staticClass:"w100 gui-text-center gui-relative ml50",attrs:{url:"/pages/ldd/shopcart","open-type":"redirect","hover-class":""}},[e.shopCardCount>0?a("v-uni-view",{staticClass:"shopCartNum bgFF4F00 cFFFFFF fb f20"},[e._v(e._s(e.shopCardCount))]):e._e(),a("v-uni-image",{staticClass:"footImg",attrs:{src:i("6989"),mode:"aspectFill"}}),a("v-uni-view",{staticClass:"f24 c999999 gui-text-center fm"},[e._v("购物车")])],1)],1),a("v-uni-view",{staticClass:"gui-flex gui-align-items-center gui-justify-content-end"},[a("v-uni-view",{staticClass:"btn1 fm f28 cFFFFFF",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.buyClick(1)}}},[e._v("加入购物车")]),a("v-uni-view",{staticClass:"btn2 fm f28 cFFFFFF mr20",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.buyClick(2)}}},[e._v("立即购买")])],1)],1)],1):e._e()],2)],1)},s=[]},"2a27":function(e,t,i){"use strict";i.r(t);var a=i("536b"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(s);t["default"]=n.a},"4a41":function(e,t,i){"use strict";var a=i("a970"),n=i.n(a);n.a},"536b":function(e,t,i){"use strict";i("7a82");var a=i("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("ade3"));i("acd8"),i("d401"),i("81b2"),i("0eb6"),i("b7ef"),i("8bd4"),i("c19f"),i("ace4"),i("d3b7"),i("5cc6"),i("907a"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("986a"),i("1d02"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("b39a"),i("72f7"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("159b"),i("14d9"),i("a9e3");var s,o,r=a(i("66e9")),u={data:function(){return{pageLoading:!1,isEmpty:!1,id:0,banner:[],goods:null,speclist:[],sureType:0,shopCardCount:0,sureText:"",goodsFirstImg:"",userCode:"",logo:"",path:"",usefulPrice:0,mValue:0,detail:"",options:[],goods_option_name:"",price:0,num:1,minNum:1,maxNum:99,skuSn:""}},filters:{numFilter:function(e){return parseFloat(e).toFixed(2)}},onLoad:function(e){o=this,o.id=e.id,o.getLogo(),o.getUserCode()},onShow:function(){o.getDetail()},onReady:function(){},methods:(s={savePicture:function(){for(var e=o.path,t=e.split(","),i=atob(t[1]),a=new ArrayBuffer(i.length),n=new Uint8Array(a),s=0;s<i.length;s++)n[s]=i.charCodeAt(s);var r=new Blob([a],{type:"application/octet-stream"}),u=URL.createObjectURL(r),c=document.createElement("a");c.href=u,c.download=(new Date).valueOf()+".png";var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(l),URL.revokeObjectURL(u)},getLogo:function(){uni.gRequest.post("swoft/api/config/getLogo",{data:{}},(function(e){0==e.code&&(o.logo=e.data.logoPath)}),(function(e){o.$refs.guiPage.openMessage("default","请求错误",!0,1500)}),(function(e){}),!0,!0)},getUserCode:function(){uni.gRequest.post("swoft/api/user/getUserCode",{data:{uid:uni.getStorageSync("userInfo").id}},(function(e){0==e.code&&(o.userCode=e.data)}),(function(e){o.$refs.guiPage.openMessage("default","请求错误",!0,1500)}),(function(e){}),!0,!0)},numFilter:function(e){return parseFloat(e).toFixed(2)},getDetail:function(){uni.getStorageSync("userInfo").id;uni.gRequest.checkLogin(),o.pageLoading=!0,uni.gRequest.post("swoft/api/ldd/getGoodsDetail",{data:{id:o.id,uid:uni.getStorageSync("userInfo").id}},(function(e){if(0==e.code){var t=e.data.detailImgList.split(","),i=[];t.forEach((function(e,t){var a={img:e,title:"",url:"",opentype:"click"};i.push(a)})),o.banner=i,o.goodsFirstImg=e.data.options[0].imgUrl,o.goods=e.data,o.usefulPrice=e.data.options[0].usefulPrice,o.mValue=e.data.options[0].mValue,o.detail=e.data.options[0].detail,o.options=e.data.options;var a="";e.data.options[0].attributeJson.forEach((function(e){""==a?a=e.val:a+="+"+e.val})),o.skuSn=e.data.options[0].skuSn,o.price=e.data.options[0].costPrice,o.goods_option_name=a,o.num=1,o.minNum=1,o.shopCardCount=e.data.shopCardCount}else o.isEmpty=!0}),(function(e){o.$refs.guiPage.openMessage("default","请求错误",!0,1500)}),(function(e){o.pageLoading=!1,3==e.data.code&&(o.$refs.guiPage.openMessage("default","请重新登录",!0,1500),setTimeout((function(){uni.gRequest.gotoLogin()}),1500))}),!0,!0)},chooseSpec:function(e){for(var t=0;t<o.options.length;t++)o.options[t].checked=!1;o.options[e].checked=!0,o.num=1,o.skuSn=o.options[e].skuSn,o.price=o.options[e].costPrice;var i="";o.options[e].attributeJson.forEach((function(e){""==i?i=e.val:i+="+"+e.val})),o.goods_option_name=i;var a=o.options[e].detailImgList.split(","),n=[];a.forEach((function(e,t){var i={img:e,title:"",url:"",opentype:"click"};n.push(i)})),o.banner=n,o.goodsFirstImg=o.options[e].imgUrl,o.usefulPrice=o.options[e].usefulPrice,o.mValue=o.options[e].mValue,o.detail=o.options[e].detail},numberChange:function(e){o.num=e[0]},buyClick:function(e){o.sureType=e,o.sureText=1==e?"加入购物车":"立即购买",o.$refs.goodsAttr.open()}},(0,n.default)(s,"numberChange",(function(e){o.num=e[0]})),(0,n.default)(s,"sure",(function(){if(1==o.sureType)o.pageLoading=!0,uni.gRequest.post("swoft/api/ldd/editShopcart",{data:{uid:uni.getStorageSync("userInfo").id,spu_sn:o.goods.spuSn,sku_sn:o.skuSn,source_type:o.goods.sourceType,num:o.num,form:"goods"}},(function(e){0==e.code?(o.$refs.guiPage.openMessage("success","已加入到购物车",!0,1500),o.$refs.goodsAttr.close(),o.shopCardCount=Number(o.shopCardCount)+o.num):o.$refs.guiPage.openMessage("default",e.msg,!0,1500)}),(function(e){o.$refs.guiPage.openMessage("default","请求错误",!0,1500)}),(function(e){o.pageLoading=!1}),!0,!0);else{var e=[];e.push({spu_sn:o.goods.spuSn,sku_sn:o.skuSn,goods_name:o.goods.title,goods_img:o.goodsFirstImg,goodsOptionName:o.goods_option_name,num:o.num,price:o.usefulPrice,cost_price:o.price,totalPrice:parseFloat(o.num*parseFloat(o.usefulPrice)).toFixed(2),totalMvalue:o.num*o.mValue}),o.$refs.goodsAttr.close(),uni.setStorageSync("lddPostData",e),uni.navigateTo({url:"/pages/ldd/postOrder?num="+e[0].num+"&totalPrice="+e[0].totalPrice+"&shopCartIdList="})}})),(0,n.default)(s,"saveImage",(function(){o.pageLoading=!0,uni.saveImageToPhotosAlbum({filePath:o.path,success:function(e){o.pageLoading=!1,o.$refs.guiPage.openMessage("success","已保存到相册",!0,1500)},fail:function(e){o.pageLoading=!1,o.$refs.guiPage.openMessage("default","保存失败,请确定是否开启相应权限",!0,1500)}})})),s),components:{jyfParser:r.default}};t.default=u},a970:function(e,t,i){var a=i("b4d5");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("9a892630",a,!0,{sourceMap:!1,shadowMode:!1})},b4d5:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,"uni-page-body[data-v-1428deec]{background-color:#f5f5f9}body.?%PAGE?%[data-v-1428deec]{background-color:#f5f5f9}.gui-footer-large-buttons[data-v-1428deec]{border-radius:%?50?%;margin-right:0;overflow:hidden}.speclist[data-v-1428deec]{display:flex;flex-wrap:wrap}.specli[data-v-1428deec]{padding:%?10?% %?20?%;min-width:%?90?%;background-color:#e5e5e5;border-radius:%?8?%;font-size:%?26?%;margin:0 %?20?% %?20?% 0;color:#666;text-align:center}.specli000000[data-v-1428deec]{border-color:#000;background-color:#000;color:#fff}.specliF9DB3B[data-v-1428deec]{border-color:#f9db3b;background-color:#f9db3b;color:#fff}.h120[data-v-1428deec]{height:%?120?%}.footImg[data-v-1428deec]{width:%?30?%;height:%?30?%}.w100[data-v-1428deec]{width:%?100?%}.btn1[data-v-1428deec]{width:%?180?%;height:%?70?%;line-height:%?70?%;text-align:center;border-radius:%?35?% 0 0 %?35?%;background-image:linear-gradient(90deg,#ff9502,#ffc900)}.btn2[data-v-1428deec]{width:%?180?%;height:%?70?%;line-height:%?70?%;text-align:center;border-radius:0 %?35?% %?35?% 0;background-image:linear-gradient(90deg,#ff7600,#ff4f00)}.btn3[data-v-1428deec]{width:%?360?%;height:%?70?%;line-height:%?70?%;text-align:center;border-radius:%?35?%;background-image:linear-gradient(90deg,#ff7600,#ff4f00)}.shopCartNum[data-v-1428deec]{height:%?28?%;line-height:%?28?%;border-radius:%?15?%;padding:0 %?9?%;display:inline-block;position:absolute;top:%?-10?%;left:%?60?%;z-index:99}.product-attr[data-v-1428deec]{width:%?690?%;max-height:%?750?%;margin:%?30?% 0}.speclist[data-v-1428deec]{display:flex;flex-wrap:wrap}.specli[data-v-1428deec]{padding:%?10?% %?20?%;min-width:%?90?%;background-color:#f6f6f6;border-radius:%?8?%;font-size:%?26?%;margin:0 %?20?% %?20?% 0;color:#000;text-align:center;border:thin solid #f6f6f6}.speclied[data-v-1428deec]{border-color:#ff4f00;background-color:#fdf9fa;color:#ff4f00}.sure[data-v-1428deec]{height:%?90?%;border-radius:%?45?%;text-align:center;line-height:%?90?%;color:#fff;font-size:%?30?%;margin-top:%?40?%}.lime-painter[data-v-1428deec]{position:fixed;left:%?2000?%}.h5Desc[data-v-1428deec]{text-align:center;font-size:%?28?%;color:#fff;margin-top:%?100?%}",""]),e.exports=t}}]);