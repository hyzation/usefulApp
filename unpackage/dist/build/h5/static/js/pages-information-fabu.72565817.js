(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-information-fabu"],{"0364":function(e,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("a9e3");var i={name:"gui-image",props:{src:{type:String,default:""},mode:{type:String,default:"widthFix"},width:{type:Number,default:300},height:{type:Number,default:0},timer:{type:Number,default:200},borderRadius:{type:String,default:"0rpx"}},data:function(){return{isLoading:!0,imgHeight:180,opacity:0,animate:!1,failed:!1}},methods:{imgLoad:function(e){var t=this,a=e.detail.width/e.detail.height;this.imgHeight=this.width/a,this.animate=!0,setTimeout((function(){t.isLoading=!1,t.opacity=1}),this.timer)},error:function(){this.isLoading=!1,this.failed=!0}}};t.default=i},"12ef":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return i}));var i={guiPage:a("1d79").default,graceSelectImgAndUploadQiniu:a("9b78").default,guiImage:a("e1fa").default},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("gui-page",{ref:"guiPage",attrs:{isLoading:e.pageLoading}},[a("v-uni-view",{staticClass:"source",attrs:{slot:"gBody"},slot:"gBody"},[a("v-uni-form",{on:{submit:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"mt20 p20 bgff br10",style:"min-height:"+e.mainHeight+"px;"},[a("v-uni-view",{staticClass:"gui-flex gui-wrap"},[a("graceSelectImgAndUploadQiniu",{ref:"selectimgandupload",attrs:{selectedimgs:e.selectedimgs,maxFileNumber:9,itemsWidth:"200rpx",btnImg:"../../static/images/setting/quanziuplods.png"},on:{uploaded:function(t){arguments[0]=t=e.$handleEvent(t),e.imgLoaded.apply(void 0,arguments)},change:function(t){arguments[0]=t=e.$handleEvent(t),e.imgsChange.apply(void 0,arguments)},uploaderror:function(t){arguments[0]=t=e.$handleEvent(t),e.uploaderror.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"gui-form-item mt20 gui-relative borderBottom"},[a("v-uni-input",{staticClass:"gui-form-input f28 wp100",attrs:{type:"text",name:"title",placeholder:"请输入标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),a("v-uni-textarea",{staticClass:"f28 ptb20",staticStyle:{width:"670rpx"},attrs:{placeholder:"请输入正文（不少于5个字）",name:"content","auto-height":!0,maxlength:1e3},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),a("v-uni-view",{staticStyle:{height:"120rpx"}}),a("v-uni-view",{staticClass:"gui-fixed-lb wp100 ptb20",attrs:{id:"footer"}},[a("v-uni-view",{staticClass:"gui-flex gui-align-items-center gui-space-between plr20"},[a("v-uni-view",{staticClass:"cff btnleft gui-flex gui-column gui-align-items-center gui-justify-content-center"},[a("v-uni-view",{staticClass:"gui-flex gui-align-items-center",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.saveDraft.apply(void 0,arguments)}}},[a("gui-image",{attrs:{src:"/static/images/setting/ccgicom.png",width:26}}),a("v-uni-text",{staticClass:"ml10 f30"},[e._v("存草稿")])],1)],1),a("v-uni-button",{staticClass:"btnright gui-text-center bgff4f00 cff f30",attrs:{"form-type":"submit","hover-class":""}},[a("v-uni-text",[e._v("发布圈子")])],1)],1)],1)],1)],1)],1)},o=[]},"17f1":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"gui-img gui-flex gui-align-items-center gui-justify-content-center",style:{width:e.width+"rpx",height:0==e.height?e.imgHeight+"rpx":e.height+"rpx",borderRadius:e.borderRadius}},[a("v-uni-image",{style:{width:e.width+"rpx",height:e.imgHeight+"rpx",borderRadius:e.borderRadius,opacity:e.opacity},attrs:{src:e.src,mode:e.mode},on:{load:function(t){arguments[0]=t=e.$handleEvent(t),e.imgLoad.apply(void 0,arguments)},error:function(t){arguments[0]=t=e.$handleEvent(t),e.error.apply(void 0,arguments)}}}),e.isLoading?a("v-uni-text",{staticClass:"gui-img-loading gui-icons",class:[e.animate?"gui-fade-out":""],style:{width:e.width+"rpx",height:0==e.height?e.imgHeight+"rpx":e.height+"rpx",lineHeight:0==e.height?e.imgHeight+"rpx":e.height+"rpx",borderRadius:e.borderRadius}},[e._v("")]):e._e(),e.failed?a("v-uni-text",{staticClass:"gui-img-loading gui-icons",class:[e.animate?"gui-fade-out":""],style:{width:e.width+"rpx",height:0==e.height?e.imgHeight+"rpx":e.height+"rpx",lineHeight:0==e.height?e.imgHeight+"rpx":e.height+"rpx",borderRadius:e.borderRadius}},[e._v("")]):e._e()],1)},n=[]},"7fb3":function(e,t,a){"use strict";var i=a("c9f6"),n=a.n(i);n.a},a3a3:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'uni-page-body[data-v-c2dc5334]{font-family:MEDIUM}.mt46[data-v-c2dc5334]{margin-top:%?46?%}.mr30[data-v-c2dc5334]{margin-right:%?30?%}.mauto[data-v-c2dc5334]{margin:0 auto}.bgff[data-v-c2dc5334]{background-color:#fff}.bgF5D395[data-v-c2dc5334]{background-color:#f5d395}.p20[data-v-c2dc5334]{padding:%?20?%}.plr20[data-v-c2dc5334]{padding-left:%?20?%;padding-right:%?20?%}.ptb20[data-v-c2dc5334]{padding-top:%?20?%;padding-bottom:%?20?%}.mt20[data-v-c2dc5334]{margin-top:%?20?%}.mt30[data-v-c2dc5334]{margin-top:%?30?%}.ml10[data-v-c2dc5334]{margin-left:%?10?%}.ml20[data-v-c2dc5334]{margin-left:%?20?%}.mlr20[data-v-c2dc5334]{margin-left:%?20?%;margin-right:%?20?%}.mt10[data-v-c2dc5334]{margin-top:%?10?%}.mb10[data-v-c2dc5334]{margin-bottom:%?10?%}.f28[data-v-c2dc5334]{font-size:%?28?%}.f26[data-v-c2dc5334]{font-size:%?26?%}.f22[data-v-c2dc5334]{font-size:%?22?%}.f36[data-v-c2dc5334]{font-size:%?36?%}.f24[data-v-c2dc5334]{font-size:%?24?%}.c99[data-v-c2dc5334]{color:#666}.c989898[data-v-c2dc5334]{color:#989898}.cff4f00[data-v-c2dc5334]{color:#ff4f00}.c33[data-v-c2dc5334]{color:#333}.bgff4f00[data-v-c2dc5334]{background-color:#ff4f00}.btn1[data-v-c2dc5334]{width:%?200?%;height:%?90?%;border-radius:%?45?%;line-height:%?90?%;text-align:center}.btn2[data-v-c2dc5334]{width:%?196?%;height:%?86?%;border-radius:%?45?%;line-height:%?90?%;text-align:center}.tag1[data-v-c2dc5334]{height:%?40?%;border-radius:%?20?%;width:%?110?%;text-align:center;line-height:%?40?%}.tag2[data-v-c2dc5334]{height:%?40?%;border-radius:%?20?%;width:%?80?%;text-align:center;line-height:%?40?%}.btn-A[data-v-c2dc5334]{width:%?690?%;height:%?90?%;border-radius:45px;line-height:%?90?%;text-align:center;margin:0 auto}.border-ff4f00[data-v-c2dc5334]{border:%?1?% solid #ff4f00}.c66[data-v-c2dc5334]{color:#666}.cff[data-v-c2dc5334]{color:#fff}.no-scale[data-v-c2dc5334]{flex-shrink:0}.wp100[data-v-c2dc5334]{width:100%}.fw500[data-v-c2dc5334]{font-weight:500}.borderBottom[data-v-c2dc5334]:before{content:" ";position:absolute;bottom:0;left:0;right:0;border-bottom:1px solid #f1f1f1;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleY(.5);transform:scaleY(.5)}.btnleft[data-v-c2dc5334]{background-color:#dedede;width:%?246?%;height:%?90?%;border-radius:%?45?%}.btnright[data-v-c2dc5334]{width:%?426?%;height:%?90?%;border-radius:%?45?%;line-height:%?90?%}uni-page-body[data-v-c2dc5334]{background-color:#f5f5f9}body.?%PAGE?%[data-v-c2dc5334]{background-color:#f5f5f9}.source[data-v-c2dc5334]{width:%?710?%;margin-left:%?20?%;margin-right:%?20?%}.form-label[data-v-c2dc5334]{height:%?120?%;line-height:%?120?%;overflow:hidden}.mb30[data-v-c2dc5334]{margin-bottom:%?30?%}',""]),e.exports=t},be7f:function(e,t,a){"use strict";a("7a82");var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("d3b7"),a("159b"),a("14d9"),a("ac1f"),a("5319"),a("e9c4");var n,o=i(a("9b78")),d=a("084d"),r={data:function(){return{pageLoading:!1,mainHeight:0,selectedimgs:[],formData:null,title:"",content:"",type:1}},onLoad:function(){n=this,n.getNewsCaogaoDetail()},onReady:function(){uni.gJS.select("#footer",(function(e){n.mainHeight=uni.gJS.system().windowHeight-e.height-uni.upx2px(60)}))},methods:{getNewsCaogaoDetail:function(){n.pageLoading=!0,uni.gRequest.post("swoft/api/news/getNewsCaogaoDetail",{data:{uid:uni.getStorageSync("userInfo").id}},(function(e){if(0==e.code){if(e.data){n.title=e.data.title,void 0!=e.data.cover&&e.data.cover.forEach((function(e,t){n.selectedimgs.push({url:e,progress:100,error:!1,_key:t})}));var t=e.data.content.replace(/<br\/>/g,"\n");t=t.replace(/&nbsp;/g," "),n.content=t}}else n.$refs.guiPage.openMessage("default",e.msg,!0,1500)}),(function(e){n.$refs.guiPage.openMessage("default","请求错误",!0,1500)}),(function(e){n.pageLoading=!1,3==e.data.code&&(n.$refs.guiPage.openMessage("default","请重新登录",!0,1500),setTimeout((function(){uni.gRequest.gotoLogin()}),1500))}),!0,!0)},saveDraft:function(){if(n.type=1,n.selectedimgs.length>0)n.$refs.selectimgandupload.upload();else{n.doSaveDraft([])}},doSaveDraft:function(e){n.pageLoading=!0;var t={uid:uni.getStorageSync("userInfo").id,title:n.title,content:n.content};e.length>0?t.imgpath=JSON.stringify(e):t.imgpath="";var a=t.content.replace(/\n/g,"_@").replace(/\r/g,"_#");a=a.replace(/_#_@/g,"<br/>"),a=a.replace(/_@/g,"<br/>"),a=a.replace(/\s/g,"&nbsp;"),t.content=a,uni.gRequest.post("swoft/api/news/addnewsCaogao",{data:t},(function(e){0==e.code?n.$refs.guiPage.openMessage("success","已保存",!0,1500):n.$refs.guiPage.openMessage("default",e.msg,!0,1500)}),(function(e){n.$refs.guiPage.openMessage("default","请求错误",!0,1500)}),(function(e){n.pageLoading=!1,3==e.data.code&&(n.$refs.guiPage.openMessage("default","请重新登录",!0,1500),setTimeout((function(){uni.gRequest.gotoLogin()}),1500))}),!0,!0)},imgsChange:function(e){n.selectedimgs=e},imgLoaded:function(e){1==n.type?n.doSaveDraft(e):n.submitNews(e)},uploaderror:function(){return n.$refs.guiPage.openMessage("default","图片上传失败",!0,1500),!1},clearAllImgs:function(){n.$refs.selectimgandupload.clearAllImgs()},submit:function(e){if(0==n.selectedimgs.length)return n.$refs.guiPage.openMessage("default","请上传照片",!0,1500),!1;var t=e.detail.value,a=d.check(t,[{name:"title",checkType:"notnull",checkRule:"",errorMsg:"请输入标题"},{name:"content",checkType:"notnull",checkRule:"",errorMsg:"请输入正文"},{name:"content",checkType:"string",checkRule:"5,",errorMsg:"正文内容不少于5个字"}]);if(!a)return n.$refs.guiPage.openMessage("default",d.error,!0,1500),!1;var i=t.content.replace(/\n/g,"_@").replace(/\r/g,"_#");i=i.replace(/_#_@/g,"<br/>"),i=i.replace(/_@/g,"<br/>"),i=i.replace(/\s/g,"&nbsp;"),t.content=i,n.formData=t,n.type=2,n.$refs.selectimgandupload.upload()},submitNews:function(e){n.formData.imgpath=JSON.stringify(e),n.formData.uid=uni.getStorageSync("userInfo").id,n.pageLoading=!0,uni.gRequest.post("swoft/api/news/addNews",{data:n.formData},(function(e){if(0==e.code){uni.removeStorageSync("newsDraft");var t="";t=0==e.data?"发布成功":"提交成功,请等待平台审核",n.$refs.guiPage.openMessage("success",t,!0,1500),setTimeout((function(){uni.navigateBack({delta:1})}),1500)}else n.$refs.guiPage.openMessage("default",e.msg,!0,1500)}),(function(e){n.$refs.guiPage.openMessage("default","请求错误",!0,1500)}),(function(e){n.pageLoading=!1,3==e.data.code&&(n.$refs.guiPage.openMessage("default","请重新登录",!0,1500),setTimeout((function(){uni.gRequest.gotoLogin()}),1500))}),!0,!0)}},components:{graceSelectImgAndUploadQiniu:o.default}};t.default=r},c7c4:function(e,t,a){"use strict";a.r(t);var i=a("0364"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},c9f6:function(e,t,a){var i=a("e844");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("faf62250",i,!0,{sourceMap:!1,shadowMode:!1})},e1fa:function(e,t,a){"use strict";a.r(t);var i=a("17f1"),n=a("c7c4");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("7fb3");var d=a("f0c5"),r=Object(d["a"])(n["default"],i["b"],i["c"],!1,null,"398e8729",null,!1,i["a"],void 0);t["default"]=r.exports},e21c:function(e,t,a){"use strict";a.r(t);var i=a("be7f"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},e844:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".gui-img[data-v-398e8729]{width:%?500?%;height:%?500?%;overflow:hidden;font-size:0;position:relative}.gui-img-loading[data-v-398e8729]{position:absolute;left:0;top:0;background-color:#f8f8f8;font-size:%?58?%;color:#d9d9d9;text-align:center}",""]),e.exports=t},eeb5:function(e,t,a){var i=a("a3a3");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("1b13f2ef",i,!0,{sourceMap:!1,shadowMode:!1})},f540:function(e,t,a){"use strict";var i=a("eeb5"),n=a.n(i);n.a},faf6:function(e,t,a){"use strict";a.r(t);var i=a("12ef"),n=a("e21c");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("f540");var d=a("f0c5"),r=Object(d["a"])(n["default"],i["b"],i["c"],!1,null,"c2dc5334",null,!1,i["a"],void 0);t["default"]=r.exports}}]);