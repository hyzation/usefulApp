(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"1cc4":function(e,t,a){"use strict";a.r(t);var n=a("93c9"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=i.a},3121:function(e,t,a){"use strict";a.r(t);var n=a("57ae"),i=a("1cc4");for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);var u=a("f0c5"),r=Object(u["a"])(i["default"],n["b"],n["c"],!1,null,"36b60d7e",null,!1,n["a"],void 0);t["default"]=r.exports},"57ae":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return n}));var n={guiPage:a("1d79").default,guiImage:a("e1fa").default,guiPopup:a("d2c4").default},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("gui-page",{ref:"guiPage",attrs:{isLoading:e.pageLoading,fullPage:!0,customHeader:!0,isHeaderSized:!1,headerSets:{height:0}}},[n("v-uni-view",{staticClass:"fullPage gui-flex gui-justify-content-center gui-align-items-center",attrs:{slot:"gBody"},slot:"gBody"},[n("v-uni-view",{staticClass:"w620"},[n("gui-image",{attrs:{src:"../../static/images/zheng/logo.png",width:120,height:120,timer:0,mode:"aspectFit"}}),n("v-uni-view",{staticClass:"fb f40 lh40 mt40"},[e._v("欢迎使用有用APP")]),n("v-uni-form",{on:{submit:function(t){arguments[0]=t=e.$handleEvent(t),e.doSubmit.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"fm f28 lh28 mt90"},[e._v("手机号")]),n("v-uni-input",{staticClass:"h90 lh90 f32 fm gui-relative borderBottom",attrs:{name:"tel",type:"number",maxlength:11,"placeholder-class":"c999999 f28",placeholder:"请输入手机号"}}),n("v-uni-view",{staticClass:"fm f28 lh28 mt30"},[e._v("密码")]),n("v-uni-view",{staticClass:"h90 gui-relative borderBottom gui-flex gui-align-items-center gui-space-between"},[n("v-uni-input",{staticClass:"f32 fm",attrs:{name:"password",type:e.eyeOpen?"text":"password",maxlength:20,"placeholder-class":"c999999 f28",placeholder:"请输入密码"}}),n("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changeEye.apply(void 0,arguments)}}},[n("gui-image",{attrs:{src:"../../static/images/zheng/"+(e.eyeOpen?"eye_open":"eye_close")+".png",width:24,height:16,timer:0}})],1)],1),n("v-uni-button",{staticClass:"h90 w620 lh90 cFFFFFF bgFF4F00 br45 mt60 f30 fb",attrs:{"form-type":"submit","hover-class":"none"}},[e._v("登录")])],1),n("v-uni-view",{staticClass:"gui-flex gui-align-items-center gui-space-between mt20"},[n("v-uni-navigator",{staticClass:"c999999 f28 lh28 fm",attrs:{url:"/pages/login/resetPassWord","hover-class":""}},[e._v("忘记密码")]),n("v-uni-navigator",{staticClass:"cFF4F00 f28 lh28 fm",attrs:{url:"/pages/login/register","hover-class":""}},[e._v("注册账号")])],1)],1),n("gui-popup",{ref:"guipopupInfo",attrs:{zIndex:99,width:"600rpx",bgColor:"rgba(0,0,0,0.85)",canCloseByShade:!1}},[n("v-uni-view",{staticClass:"gui-flex gui-align-items-center gui-justify-content-center gui-wrap"},[n("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)}}},[n("gui-image",{attrs:{src:"../../static/images/zheng/close.png",timer:0,width:48,height:48}})],1),n("v-uni-view",{staticClass:"br20 mt60 bgFFFFFF overHidden"},[n("v-uni-view",{staticClass:"popTop gui-relative"},[n("v-uni-view",{staticClass:"popTopBox gui-absolute-lt gui-flex gui-justify-content-center gui-align-items-center"},[n("v-uni-view",{staticClass:"popTopBoxHead gui-flex gui-justify-content-center gui-align-items-center",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseImage.apply(void 0,arguments)}}},[""==e.tempFilePath?n("v-uni-image",{staticClass:"popTopBoxHeadImg_",attrs:{mode:"aspectFit",src:a("76b7")}}):n("v-uni-image",{staticClass:"wp100 hp100",attrs:{mode:"aspectFit",src:e.tempFilePath}})],1)],1),n("v-uni-view",{staticClass:"c999999 fm f20 wp100 gui-absolute-lb gui-text-center",staticStyle:{bottom:"30rpx"}},[e._v("请上传头像")]),n("v-uni-view",{staticClass:"cFF4F00 fb f34 lh34 wp100 gui-absolute-lb gui-text-center",staticStyle:{bottom:"-30rpx"}},[e._v("完善资料")])],1),n("v-uni-view",{staticClass:"plr40 mt50"},[n("v-uni-view",{staticClass:"gui-relative h90 lh90 borderBottom gui-flex gui-align-items-center gui-space-between"},[n("v-uni-text",{staticClass:"f28 fm"},[e._v("昵称")]),n("v-uni-input",{staticClass:"h90 lh90 gui-text-right f28 fm",staticStyle:{width:"420rpx"},attrs:{maxlength:15,placeholder:"请输入昵称","placeholder-class":"c999999"},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1),n("v-uni-view",{staticClass:"gui-relative h90 lh90 borderBottom gui-flex gui-align-items-center gui-space-between"},[n("v-uni-text",{staticClass:"f28 fm"},[e._v("性别")]),n("v-uni-view",{staticClass:"gui-flex gui-align-items-center gui-justify-content-end"},[n("v-uni-view",{staticClass:"ml30 gui-flex gui-align-items-center",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changeGender(1)}}},[n("v-uni-text",{staticClass:"gui-icons cFF4F00 f32"},[e._v(e._s(1==e.gender?"":""))]),n("v-uni-text",{staticClass:"fm f28 ml10"},[e._v("男")])],1),n("v-uni-view",{staticClass:"ml30 gui-flex gui-align-items-center",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changeGender(2)}}},[n("v-uni-text",{staticClass:"gui-icons cFF4F00 f32"},[e._v(e._s(2==e.gender?"":""))]),n("v-uni-text",{staticClass:"fm f28 ml10"},[e._v("女")])],1)],1)],1),n("v-uni-view",{staticClass:"gui-relative borderBottom"},[n("v-uni-view",{staticClass:"f28 lh28 mt30 fm"},[e._v("个性签名")]),n("v-uni-textarea",{staticClass:"f28 fm",staticStyle:{width:"520rpx",padding:"30rpx 0"},attrs:{maxlength:50,placeholder:"请输入个性签名","placeholder-class":"c999999","auto-height":!0},model:{value:e.signature,callback:function(t){e.signature=t},expression:"signature"}})],1),n("v-uni-view",{staticClass:"f26 cFFFFFF fm bgFF4F00 br30 gui-text-center h60 lh60 w200 mtb30Auto",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.perfectInfo.apply(void 0,arguments)}}},[e._v("提交")])],1)],1)],1)],1)],1)],1)},s=[]},"93c9":function(e,t,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,s=n(a("3835")),u=n(a("c7eb")),r=n(a("1da1")),c=a("084d"),o={data:function(){return{pageLoading:!1,eyeOpen:!1,tempFilePath:"",gender:2,nickname:"",signature:""}},onShow:function(){""!=getApp().globalData.tempFilePath&&(i.tempFilePath=getApp().globalData.tempFilePath,getApp().globalData.tempFilePath="")},onLoad:function(){i=this},onReady:function(){},methods:{changeEye:function(){i.eyeOpen=!i.eyeOpen},doSubmit:function(e){var t;t=e.detail.value;var a=c.check(t,[{name:"tel",checkType:"notnull",checkRule:"",errorMsg:"请输入手机号"},{name:"tel",checkType:"phoneno",checkRule:"",errorMsg:"手机号格式不正确"},{name:"password",checkType:"notnull",checkRule:"",errorMsg:"请输入密码"},{name:"password",checkType:"reg",checkRule:"^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$",errorMsg:"密码格式不正确"}]);if(!a)return i.$refs.guiPage.openMessage("default",c.error,!0,1500),!1;i.pageLoading=!0,uni.gRequest.post("swoft/api/login/passwordLogin",{data:t},(function(e){0==e.code?(i.$refs.guiPage.openMessage("success",e.msg,!0,1500),uni.setStorageSync("userInfo",e.data.userInfo),uni.gRequest.writeLoginToken(e.data.uToken,e.data.userInfo.id),""==e.data.userInfo.nickname?setTimeout((function(){i.$refs.guipopupInfo.open()}),1500):setTimeout((function(){uni.reLaunch({url:"/pages/start/advertising"})}),1500)):i.$refs.guiPage.openMessage("default",e.msg,!0,1500)}),(function(e){i.$refs.guiPage.openMessage("default","请求错误",!0,1500)}),(function(e){i.pageLoading=!1}),!0)},changeGender:function(e){i.gender=e},chooseImage:function(){uni.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:function(e){uni.navigateTo({url:"/pages/weCropper/weCropper?tmpFace="+encodeURIComponent(e.tempFilePaths[0])})}})},perfectInfo:function(){var e=(0,r.default)((0,u.default)().mark((function e(){var t,a,n,s;return(0,u.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t={},t.id=uni.getStorageSync("userInfo").id,t.nickname=i.nickname,t.gender=i.gender,t.signature=i.signature,a=[{name:"nickname",checkType:"notnull",checkRule:"",errorMsg:"请输入昵称"},{name:"nickname",checkType:"string",checkRule:"1,15",errorMsg:"昵称不能超过15个字符"}],n=c.check(t,a),n){e.next=10;break}return i.$refs.guiPage.openMessage("default",c.error,!0,1500),e.abrupt("return",!1);case 10:if(i.pageLoading=!0,""==i.tempFilePath){e.next=16;break}return e.next=14,i.uploadImage();case 14:s=e.sent,t.headimgurl=s;case 16:uni.gRequest.post("swoft/api/user/editUserInfo",{data:t},(function(e){0==e.code?(i.$refs.guipopupInfo.close(),i.$refs.guiPage.openMessage("success",e.msg,!0,1500),uni.setStorageSync("userInfo",e.data),setTimeout((function(){uni.reLaunch({url:"/pages/start/advertising"})}),1500)):i.$refs.guiPage.openMessage("default",e.msg,!0,1500)}),(function(e){i.$refs.guiPage.openMessage("default","请求错误",!0,1500)}),(function(e){i.pageLoading=!1}),!0,!0);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),uploadImage:function(){var e=(0,r.default)((0,u.default)().mark((function e(){var t,a,n,r,c,o,l,g,p,f;return(0,u.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,uni.gRequest.postSync("swoft/api/user/getQiniuToken",{data:{}},!0,!0);case 2:if(t=e.sent,t){e.next=7;break}return i.$refs.guiPage.openMessage("default","七牛云token获取失败",!0,1500),i.pageLoading=!1,e.abrupt("return",!1);case 7:a=t.data,n="",e.t0=a.region,e.next="ECN"===e.t0?12:"NCN"===e.t0?14:"SCN"===e.t0?16:"NA"===e.t0?18:"ASG"===e.t0?20:22;break;case 12:return n="https://up.qiniup.com",e.abrupt("break",22);case 14:return n="https://up-z1.qiniup.com",e.abrupt("break",22);case 16:return n="https://up-z2.qiniup.com",e.abrupt("break",22);case 18:return n="https://up-na0.qiniup.com",e.abrupt("break",22);case 20:return n="https://up-as0.qiniup.com",e.abrupt("break",22);case 22:return r=(new Date).getTime(),c="refundss_"+r+".png",e.next=26,uni.uploadFile({url:n,filePath:i.tempFilePath,name:"file",formData:{key:c,token:a.uptoken}});case 26:if(o=e.sent,l=(0,s.default)(o,2),g=l[0],p=l[1],null==g){e.next=34;break}return i.$refs.guiPage.openMessage("default","图片上传失败",!0,1500),i.pageLoading=!1,e.abrupt("return",!1);case 34:if(p){e.next=38;break}return i.$refs.guiPage.openMessage("default","图片上传失败",!0,1500),i.pageLoading=!1,e.abrupt("return",!1);case 38:if(200==p.statusCode){e.next=42;break}return i.$refs.guiPage.openMessage("default","图片上传失败",!0,1500),i.pageLoading=!1,e.abrupt("return",!1);case 42:return f=JSON.parse(p.data),e.abrupt("return",a.domain+f.key);case 44:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),close:function(){i.$refs.guipopupInfo.close(),setTimeout((function(){uni.reLaunch({url:"/pages/start/advertising"})}),1500)}}};t.default=o}}]);